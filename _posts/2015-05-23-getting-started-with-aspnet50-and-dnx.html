---
layout: post
title: "Getting Started with ASP.NET5.0 and the DNX Framework"
published: true
---
<html>
<style>
<!--
	p.CODE, li.CODE, div.CODE
	{mso-style-name:CODE;
	mso-style-link:"CODE Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	line-height:normal;
	background:#C6D9F1;
	font-size:8.0pt;
	font-family:Consolas;
	color:windowtext;}
span.CODEChar
	{mso-style-name:"CODE Char";
	mso-style-link:CODE;
	font-family:Consolas;
	background:#C6D9F1;}
-->
</style>

</head>

<body lang=EN-GB link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoTitle>Getting Started with ASPNET5.0 and the DNX framework</p>

  

<p class=MsoNormal>I'm updating my Android SDK packages.</p>

<p class=MsoNormal>While I'm waiting, I'm going to install the latest DNX and
aspnet5.0. It's a clean VM. No Visual Studio installed. Just Xamarin Studio, so
should be a good clean install experience. Well. I was almost right.</p>

<p class=MsoNormal>If you want to know more, go to <a
href="https://github.com/aspnet/home#upgrading-dnvm-or-running-without-visual-studio">https://github.com/aspnet/home#upgrading-dnvm-or-running-without-visual-studio</a></p>

<p class=MsoNormal>From an Elevated command prompt (run as administrator),
enter the following:</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>@powershell -NoProfile -ExecutionPolicy unrestricted -Command
&quot;&amp;{$Branch='dev';iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/aspnet/Home/dev/dnvminstall.ps1'))}&quot;</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Then close the CMD prompt, and start a new cmd prompt.</p>

<p class=MsoNormal>Check to see if dnwm was installed correctly.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Where dnvm</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>And I get the location where it is setup:' <b>C:\Users\micheal\.dnx\bin\dnvm.cmd</b></p>

<p class=MsoNormal>Now run dnvm to see the OOBE.</p>

<p class=MsoNormal><img border=0 width=672 height=337 id="Picture 49"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image001.jpg"></p>

  

<p class=MsoNormal>So, I get a really cool text ascii art. Excellent. </p>

<p class=MsoNormal>I really need a bigger command prompt window. Screen buffer
height and windows size to 140. Also change the colors to dark blue and yellow.
And fix that horrible font. </p>

<p class=MsoNormal><img border=0 width=208 height=256 id="Picture 52"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image002.jpg"><img
border=0 width=207 height=256 id="Picture 55"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image003.jpg"><img
border=0 width=208 height=256 id="Picture 61"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image004.jpg"></p>

<p class=MsoNormal>That's better.' Let's install a DNX.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm install </p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal><img border=0 width=672 height=276 id="Picture 64"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image005.jpg"></p>

<p class=MsoNormal>Well that didn't work. So, I need to say what version to
install. Let's go with latest stable version of dnx.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm install latest</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

  

  

<p class=MsoNormal>That's better. We are off to the races'</p>

<p class=MsoNormal><img border=0 width=669 height=275 id="Picture 67"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image006.jpg"></p>

<p class=MsoNormal>Now we are done.</p>

<p class=MsoNormal><img border=0 width=672 height=278 id="Picture 76"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image007.jpg"></p>

<p class=MsoNormal>Let's do what the man says:</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm install latest 'Ngen</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>That didn't seem to do anything. That's not right. How about
some help?</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm help install</p>

<p class=CODE>&nbsp;</p>

  

<span style='font-size:11.0pt;font-family:"Calibri","sans-serif"'><br
clear=all style='page-break-before:always'>
</span>

<p class=MsoNormal align=left style='margin-bottom:0cm;margin-bottom:.0001pt;
text-align:left;line-height:normal'>&nbsp;</p>

<p class=CODE>dnvm install</p>

<p class=CODE>' Installs a version of the runtime</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>usage:</p>

<p class=CODE>' dnvm install [&lt;VersionNuPkgOrAlias&gt;] [-arch
&lt;Architecture&gt;] [-r &lt;Runtime&gt;] [-a &lt;Alias&gt;] [-f] [-Proxy
&lt;Proxy&gt;] [-NoNative] [-Ngen] [-Persis</p>

<p class=CODE>tent] [-Unstable]</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>options:</p>

<p class=CODE>' &lt;VersionNuPkgOrAlias&gt; The version to install from the
current channel, the path to a '.nupkg' file to install, 'latest' to</p>

<p class=CODE>install the latest available version from the current channel, or
an alias value to install an alternate</p>

<p class=CODE>runtime or architecture flavor of the specified alias.</p>

<p class=CODE>' -arch            The processor architecture of the runtime
to install (default: x86)</p>

<p class=CODE>' -r               The runtime flavor to install (default:
clr)</p>

<p class=CODE>' -a               Set alias &lt;Alias&gt; to the installed
runtime</p>

<p class=CODE>' -f               Overwrite an existing runtime if it
already exists</p>

<p class=CODE>' -Proxy               Use the given address as a proxy when
accessing remote server</p>

<p class=CODE>' -NoNative            Skip generation of native images</p>

<p class=CODE>' -Ngen            For CLR flavor only. Generate native
images for runtime libraries on Desktop CLR to improve startup time. This
option</p>

<p class=CODE>'requires elevated privilege and will be automatically turned on
if the script is running in administrative mode. To opt-out in administrati</p>

<p class=CODE>ve mode, use -NoNative switch.</p>

<p class=CODE>' -Persistent          Make the installed runtime useable across
all processes run by the current user</p>

<p class=CODE>' -Unstable            Upgrade from our unstable dev feed. This
will give you the latest development version of the runtime.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>remarks:</p>

  

<p class=MsoNormal>That didn't really help.</p>

<p class=MsoNormal>How about this?</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm 'Ngen</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Unknown command: '-Ngen'</p>

<p class=CODE>&nbsp;</p>

<p class=MsoNormal>I guess I need to force a reinstall to get 'Ngen to work</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>dnvm' install latest -f 'Ngen</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Determining latest version</p>

<p class=CODE>Cleaning existing installation...</p>

<p class=CODE>Downloading dnx-clr-win-x86.1.0.0-beta4 from
https://www.nuget.org/api/v2</p>

<p class=CODE>Installing to C:\Users\micheal\.dnx\runtimes\dnx-clr-win-x86.1.0.0-beta4</p>

<p class=CODE>Adding
C:\Users\micheal\.dnx\runtimes\dnx-clr-win-x86.1.0.0-beta4\bin to process PATH</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Well, that didn't tell me anything new, so I have no idea if
that worked.' Let's go on.</p>

<p class=MsoNormal>So, Let's see where it put out dnx stuff. Navigate to %userprofile%\.dnx\runtimes</p>

<p class=MsoNormal><img border=0 width=432 height=342 id="Picture 79"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image008.jpg"></p>

<p class=MsoNormal>And have a look at the environment variables:</p>

<p class=MsoNormal><img
border=0 width=672 height=278 id="Picture 82"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image010.jpg"></p>

<p class=MsoNormal>Let's clone some stuff. Have I git installed yet?</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Z:\&gt;git</p>

<p class=CODE>'git' is not recognized as an internal or external command,</p>

<p class=CODE>operable program or batch file.</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Nope, let's get it. I don't like how cr/lf gets messed up
with scm build on windows so I prefer the github version</p>

<p class=MsoNormal>'<a href="https://windows.github.com/">https://windows.github.com/</a></p>

<p class=MsoNormal><img border=0 width=672 height=337 id="Picture 85"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image011.jpg"></p>

<p class=MsoNormal>I don't remember this ever been so easy!</p>

<p class=MsoNormal><img border=0 width=388 height=220 id="Picture 88"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image012.jpg"></p>

<p class=MsoNormal>Start a Git Shell from the desktop. </p>

  

<p class=MsoNormal><img border=0 width=672 height=278 id="Picture 91"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image013.jpg"></p>

<p class=MsoNormal>That't better</p>

<p class=MsoNormal>Let's clone the ASPNET </p>

<p class=CODE>D:\Developer&gt;mkdir aspnet</p>

<p class=CODE>D:\Developer&gt;cd aspnet</p>

<p class=CODE>D:\Developer\aspnet&gt;git clone
https://github.com/aspnet/Home.git</p>

<p class=CODE>Cloning into 'Home'...</p>

<p class=CODE>remote: Counting objects: 1150, done.</p>

<p class=CODE>Receiving objects: 100% (1150/1150), 628.01 KiB | 413.00 KiB/s  
0</p>

<p class=CODE>Receiving objects: 100% (1150/1150), 702.31 KiB | 413.00 KiB/s,
done.</p>

<p class=CODE>Resolving deltas: 100% (668/668), done.</p>

<p class=CODE>Checking connectivity... done.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet&gt;cd Home\samples</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples&gt;cd latest</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\latest&gt;cd ConsoleApp</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\latest\ConsoleApp&gt;dnu restore</p>

<p class=CODE>Restoring packages for
D:\Developer\aspnet\Home\samples\latest\ConsoleApp\project.json</p>

<p class=CODE>' GET
https://www.myget.org/F/aspnetvnext/api/v2/FindPackagesById()?Id='System.Console'.</p>

<p class=CODE>' GET
https://nuget.org/api/v2/FindPackagesById()?Id='System.Console'.</p>

<p class=CODE>' OK
https://nuget.org/api/v2/FindPackagesById()?Id='System.Console' 2192ms</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Now we have dnx</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\<span style='background:red'>latest</span>\ConsoleApp&gt;dnx</p>

<p class=CODE>Microsoft .NET Execution environment v1.0.0-beta4-11566</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Usage: dnx [options]</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>Options:</p>

<p class=CODE>' --appbase &lt;PATH&gt;'            Application base
directory path</p>

<p class=CODE>' --lib &lt;LIB_PATHS&gt;            Paths used for library
look-up</p>

<p class=CODE>' --debug         '            Waits for the debugger to
attach before beginning execution.</p>

<p class=CODE>' -?|-h|--help                 Show help information</p>

<p class=CODE>' --version                    Show version information</p>

<p class=CODE>' --watch         '            Watch file changes</p>

<p class=CODE>' --packages &lt;PACKAGE_DIR&gt;         Directory containing
packages</p>

<p class=CODE>' --configuration &lt;CONFIGURATION&gt;' The configuration to run
under</p>

<p class=CODE>' --port &lt;PORT&gt;   '            The port to the
compilation server</p>

  

<p class=MsoNormal><span style='background:yellow'>Something I didn't get. You
have to run dnvm install each time to set the path.</span></p>

<p class=MsoNormal>Let's run it.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples&gt;dnvm install latest</p>

<p class=CODE>Determining latest version</p>

<p class=CODE>'dnx-clr-win-x86.1.0.0-beta4' is already installed.</p>

<p class=CODE>Adding
C:\Users\micheal\.dnx\runtimes\dnx-clr-win-x86.1.0.0-beta4\bin to process PATH</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Now,' navigate to, and run the console app.</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples&gt;cd latest\ConsoleApp</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\latest\ConsoleApp&gt;dnx . run</p>

<p class=CODE>Hello World</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Sweet jesus, it ran!</p>

<p class=MsoNormal>'Let's try the web Sample:</p>

<p class=CODE>&nbsp;</p>

<p class=CODE align=left style='text-align:left'>D:\Developer\aspnet\Home\samples\latest\ConsoleApp&gt;cd
..\HelloWeb</p>

<p class=CODE align=left style='text-align:left'>&nbsp;</p>

<p class=CODE align=left style='text-align:left'>D:\Developer\aspnet\Home\samples\latest\HelloWeb&gt;dnx
. web</p>

<p class=CODE align=left style='text-align:left'>System.InvalidOperationException:
No service for type 'Microsoft.Framework.Runtime.IApplicationEnvironment' has
been registered.</p>

<p class=CODE align=left style='text-align:left'>   at
Microsoft.Framework.DependencyInjection.ServiceProviderExtensions.GetRequiredService(IServiceProvider
provider, Type serviceType)</p>

<p class=CODE align=left style='text-align:left'>   at
Microsoft.Framework.DependencyInjection.ServiceProviderExtensions.GetRequiredService[T](IServiceProvider
provider)</p>

<p class=CODE align=left style='text-align:left'>   at
Microsoft.AspNet.Hosting.Program.Main(String[] args)</p>

<p class=CODE>&nbsp;</p>

  

<p class=MsoNormal>Not sure what this is about. I though I installed latest? I
googled it on bing, and found this:</p>

<p class=MsoNormal align=left style='margin-bottom:12.0pt;text-align:left;
line-height:normal;background:white'><span style='font-size:10.5pt;font-family:
"Helvetica","sans-serif";color:#222222'>http://stackoverflow.com/questions/30013929/service-missing-for-type-microsoft-framework-runtime-iapplicationenvironment</span></p>

<p class=CODE align=left style='margin-left:72.0pt;text-align:left'>I had a
similar issue when trying to run from the \samples\latest folder instead of
\samples\1.0.0-beta4 folder. Simply trying again from where I was supposed to
be worked.</p>

  

<p class=MsoNormal>So, use the 1.0.0.-beta3 not the [latest] like I have above.
Change to the beta4 path and run</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\<span style='background:red'>1.0.0-beta4</span>\HelloWeb&gt;dnx
. web</p>

<p class=CODE>Started</p>

<p class=MsoNormal>Yah!</p>

<p class=MsoNormal>Browe to localhost:5001</p>

<p class=MsoNormal><img border=0 width=672 height=767 id="Picture 94"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image014.jpg"></p>

  

<p class=MsoNormal>Finally, HelloMVC</p>

<p class=CODE>&nbsp;</p>

<p class=CODE>D:\Developer\aspnet\Home\samples\1.0.0-beta4\HelloMvc&gt;dnx .
web</p>

<p class=CODE>Started</p>

<p class=CODE>&nbsp;</p>

<p class=MsoNormal><img border=0 width=672 height=425 id="Picture 97"
src="images/Getting%20Started%20with%20ASPNET5.0%20and%20the%20DNX%20Framework_files/image015.jpg"></p>

  

<p class=MsoNormal>And, what do you know? My Android SDK's are just finished.
Brilliant.</p>

  

  

  

  

</div>

</body>

</html>
